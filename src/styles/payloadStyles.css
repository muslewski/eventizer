/* Define the Tailwind layers in the correct order */
@layer theme, base, components, utilities;

/* Import the Tailwind theme styles */
@import 'tailwindcss/theme.css' layer(theme);

/* Import animation utilities */
@import 'tw-animate-css';

/* Import shared theme (colors, animations, Tailwind mappings) */
@import './shared.scss';

/* Import scoped preflight for shadcn components */
@import './scopedPreflight.css' layer(base);

/* Skip the preflight reset to avoid conflicts with Payload's admin styles */
/* @import 'tailwindcss/preflight.css' layer(base); */

/* Import Tailwind utilities */
@import 'tailwindcss/utilities.css' layer(utilities);

/* Support Payload's dark mode toggle by adding a custom variant */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/*
 * Font size normalization for Tailwind/shadcn inside Payload Admin
 *
 * Problem: Payload sets html font-size to 13px, Tailwind assumes 16px.
 * This causes all rem-based utilities to render ~19% smaller.
 *
 * Solution: Override html to 16px and update Payload's CSS variables
 * so its --base calculation remains correct.
 *
 * Payload calculates: --base = (--base-px / --base-body-size) * 1rem
 * With 16px root and --base-body-size: 16, this stays proportional.
 */

/*
 * Payload Admin UI specific styles
 * These extend the shared theme with Payload-specific customizations
 */
:root {
  /* Payload elevation colors - maps base colors to Payload's elevation system */
  --theme-elevation-0: var(--color-base-0);
  --theme-elevation-50: var(--color-base-50);
  --theme-elevation-100: var(--color-base-100);
  --theme-elevation-150: var(--color-base-150);
  --theme-elevation-200: var(--color-base-200);
  --theme-elevation-250: var(--color-base-250);
  --theme-elevation-300: var(--color-base-300);
  --theme-elevation-350: var(--color-base-350);
  --theme-elevation-400: var(--color-base-400);
  --theme-elevation-450: var(--color-base-450);
  --theme-elevation-500: var(--color-base-500);
  --theme-elevation-550: var(--color-base-550);
  --theme-elevation-600: var(--color-base-600);
  --theme-elevation-650: var(--color-base-650);
  --theme-elevation-700: var(--color-base-700);
  --theme-elevation-750: var(--color-base-750);
  --theme-elevation-800: var(--color-base-800);
  --theme-elevation-850: var(--color-base-850);
  --theme-elevation-900: var(--color-base-900);
  --theme-elevation-950: var(--color-base-950);
  --theme-elevation-1000: var(--color-base-1000);
}

/* Dark theme - Payload elevation colors inverted */
:is(.dark, [data-theme='dark']) {
  --theme-elevation-0: var(--color-base-900);
  --theme-elevation-50: var(--color-base-850);
  --theme-elevation-100: var(--color-base-800);
  --theme-elevation-150: var(--color-base-750);
  --theme-elevation-200: var(--color-base-700);
  --theme-elevation-250: var(--color-base-650);
  --theme-elevation-300: var(--color-base-600);
  --theme-elevation-350: var(--color-base-550);
  --theme-elevation-400: var(--color-base-500);
  --theme-elevation-450: var(--color-base-450);
  --theme-elevation-500: var(--color-base-400);
  --theme-elevation-550: var(--color-base-350);
  --theme-elevation-600: var(--color-base-300);
  --theme-elevation-650: var(--color-base-250);
  --theme-elevation-700: var(--color-base-200);
  --theme-elevation-750: var(--color-base-150);
  --theme-elevation-800: var(--color-base-100);
  --theme-elevation-850: var(--color-base-50);
  --theme-elevation-900: var(--color-base-0);
  --theme-elevation-950: var(--color-base-0);
  --theme-elevation-1000: var(--color-base-0);
}

/* ------------------------------------------ */
/*
 * Payload UI element styling
 * Apply consistent border-radius to all Payload components
 */
input,
span,
.banner,
.field-type input,
.field-label,
.field-type,
.rs__control,
.rs__menu,
.rs__menu-list,
.where-builder,
.collapsible,
.collapsible__content,
.collapsible--style-default > .collapsible__toggle-wrap .collapsible__toggle,
.collapsible--style-default,
.table tbody tr:nth-child(odd),
.Toastify .Toastify__toast,
.search-bar,
.checkbox-input__input,
.pill,
.pill-selector,
.btn,
.dropzone,
.collection-edit__auth,
.doc-controls__dots,
.hamburger,
.popup-button,
.popup__content,
.react-datepicker,
.react-datepicker__day,
.localizer,
.localizer-button,
.table-wrap,
.table,
.thumbnail,
.table--appearance-condensed,
.popup,
.upload,
.file-details,
.field-type__wrap,
.textarea-outer,
button,
textarea,
.card {
  border-radius: var(--radius);
}

.btn--withPopup {
  display: flex;
  gap: 0.2rem;
}

table {
  border-radius: var(--radius);
  overflow: hidden;
}

/* repair table after adding shadcn and tailwind */
.table {
  width: 100%;
}

/* repair table cells to be vertically aligned middle */
.table td[class*='cell-'] {
  vertical-align: middle;
}

.popup__caret {
  /* Modern, elegant caret arrow */
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 8px solid var(--theme-elevation-100);
  border-top: 8px solid var(--theme-elevation-100);
}

.localizer {
  right: 60px;
  top: 130px;
  position: absolute;
  z-index: 1000;
}

#admin-layout[data-user-role='service-provider'] .localizer,
#admin-layout[data-user-role='client'] .localizer {
  display: none;
}

/* ------------------------------------------ */

@layer base {
  * {
    @apply border-border/30 outline-ring/10;
  }

  body {
    @apply bg-background text-foreground font-montserrat;
    font-optical-sizing: auto;
  }

  h1,
  h3 {
    @apply font-bebas;
    font-weight: 400;
    font-style: normal;
  }
}
